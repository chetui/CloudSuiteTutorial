* Author: Xinjie YU ([chetui](http://blog.chetui.org))
* Email: yuxinjiect@gmail.com

## Introduction

It use the GraphLab machine learning and data mining software for the graph analytics benchmark. It implemented TunkRank on GraphLab, which provides the influence of a Twitter user based on the number of that user's followers.  

Following guide is provided for a single-machine setup.  
Go to [GraphLab](http://graphlab.org/projects/tutorials.html#cluster) to see the instructions for cluster deployment.  

If you have an deployed image, you can jump to [Running Section](https://github.com/chetui/CloudSuiteTutorial/tree/master/graph_analytics#running) directly.   

## Packages

[graph.tar.gz](http://parsa.epfl.ch/cloudsuite/software/graph.tar.gz)  
[Twitter-dataset.zip](http://socialcomputing.asu.edu/uploads/1296759055/Twitter-dataset.zip)

## Building

Make sure you already installed g++ & zlib1g-dev. Or type the following command:

```
$ sudo apt-get install g++ zlib1g-dev
``` 
**You need to connect to the Internet to do following make**. (For Zjuer, I suggest you connect ZJU VPN at least.)  
It may take you a long time according to the condition of your network.

```
$ tar zxvf graph.tar.gz
$ cd graph-release
$ ./configure
$ cd release/toolkits/graph_analytics
$ make -j16 tunkrank
```
Option: Change format of Twitter Dataset if you want to run benchmark on it:

```
$ unzip Twitter-dataset.zip
$ cd Twitter-dataset/data
$ cat edges.csv | awk -F"," '{print $1, $2}' > twitter_small_data_graplab.in
```

## Runing

#### Way 1

Run **10M** vertices on **4** cpus.  
Dataset is generated by GraphLab.

```
$ cd graph-release/release/toolkits/graph_analytics
$ ./tunkrank --powerlaw=10000000 --ncpus=4 --engine=asynchronous
```

#### Way 2

Run **11M** vertices(Twitter Users) on **4** cpus.  
Require around 4GB heap memory.  
Dataset is 1.3GB, from [Twitter](http://socialcomputing.asu.edu/datasets/Twitter).  

```
$ cd graph-release/release/toolkits/graph_analytics
./tunkrank --graph=/absolute/path/to/twitter_small_data_graplab.in --format=tsv --ncpus=4 --engine=asynchronous
```

#### Way 3

Dataset is 25GB, which was extracted in 2009 year by Twitter.  
Require 45GB heap memory, which can not be satisfied with any of our matchines.
Hence, omitted.  

## References

* [Official Guideline](http://parsa.epfl.ch/cloudsuite/docs/graph-analytics.pdf)
